# Основы Pygame. Часть 1

# Создание холста
>Когда мы открываем игры - они работают в окне, но в контексте pygame лучше думать о нем как о холсте, где мы рисуем наши проекты

```python
import pygame # Импорт библитеки

# Инициализируем весь pygame
pygame.init()

# Создание окна и установка названия (подписи)
WINDOW_WIDTH = 600
WINDOW_HEIGHT = 300
display_surface = pygame.display.set_mode((WINDOW_WIDTH, WINDOW_HEIGHT))

# Основной цикл программы
running = True
while running:
    pass
```

Этот код сейчас отрисовывает просто черное окно, потому что мы на нем ничего не делаем

## event

Основной механикой игр является то, что мы можем взаимодействовать с игрой. Для этого pygame фиксирует все события, которые происходят с окном. 

Попробуйте запустить этот код и проверить терминал
```python
import pygame # Импорт библитеки

# Инициализируем весь pygame
pygame.init()

# Создание окна и установка названия (подписи)
WINDOW_WIDTH = 600
WINDOW_HEIGHT = 300
display_surface = pygame.display.set_mode((WINDOW_WIDTH, WINDOW_HEIGHT))
pygame.display.set_caption("Game")

# Основной цикл программы
running = True
while running:
    # Цикл по списку событий, которые произошли
    for event in pygame.event.get():
        print(event)
```

В терминале появляется что-то на подобие такого:
```
<Event(32783-WindowEnter {'window': None})>
<Event(1024-MouseMotion {'pos': (205, 297), 'rel': (0, 0), 'buttons': (0, 0, 0), 'touch': False, 'window': None})>
<Event(1024-MouseMotion {'pos': (205, 280), 'rel': (0, -17), 'buttons': (0, 0, 0), 'touch': False, 'window': None})>
<Event(1024-MouseMotion {'pos': (205, 246), 'rel': (0, -34), 'buttons': (0, 0, 0), 'touch': False, 'window': None})>
<Event(1024-MouseMotion {'pos': (205, 219), 'rel': (0, -27), 'buttons': (0, 0, 0), 'touch': False, 'window': None})>
<Event(1024-MouseMotion {'pos': (205, 163), 'rel': (0, -56), 'buttons': (0, 0, 0), 'touch': False, 'window': None})>
<Event(1024-MouseMotion {'pos': (205, 121), 'rel': (0, -42), 'buttons': (0, 0, 0), 'touch': False, 'window': None})>
<Event(1024-MouseMotion {'pos': (200, 69), 'rel': (-5, -52), 'buttons': (0, 0, 0), 'touch': False, 'window': None})>
<Event(1024-MouseMotion {'pos': (189, 17), 'rel': (-11, -52), 'buttons': (0, 0, 0), 'touch': False, 'window': None})>
```

И каждое из этих событий мы можем обрабатывать (говорить pygame что делать в этой ситуации)

Сейчас даже закрытие окна pygame воспринимает как ошибку, нужно это исправить
```python
import pygame # Импорт библитеки

# Инициализируем весь pygame
pygame.init()

# Создание окна и установка названия (подписи)
WINDOW_WIDTH = 600
WINDOW_HEIGHT = 300
display_surface = pygame.display.set_mode((WINDOW_WIDTH, WINDOW_HEIGHT))
pygame.display.set_caption("Game")

# Основной цикл программы
running = True
while running:
    # Цикл по списку событий, которые произошли
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
            
# Закрытие всех модулей pygame
pygame.quit()
```

Как думаете, что делает этот код:
```python
import pygame # Импорт библитеки

# Инициализируем весь pygame
pygame.init()

# Создание окна и установка названия (подписи)
WINDOW_WIDTH = 600
WINDOW_HEIGHT = 300
display_surface = pygame.display.set_mode((WINDOW_WIDTH, WINDOW_HEIGHT))
pygame.display.set_caption("Game")

# Объявляем цвета в RGB
BLACK = (0,0,0)
WHITE = (255, 255, 255)
REB = (255, 0, 0)
GREEN = (0, 255, 0)
BLUE = (0, 0, 255)
YELLOW = (255, 255, 0)
CYAN = (0, 255, 255)
MAGENTA = (255, 0, 255)

# Красим задний фон
display_surface.fill(WHITE)

# Основной цикл программы
running = True
while running:
    # Цикл по списку событий, которые произошли
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

# Закрытие всех модулей pygame
pygame.quit()
```

Красит экран в белый? Нет. Мы не обновляем окно, чтобы изменения вступили в силу

Есть 2 способа обновить окно:
- `pygame.display.flip()` - обновляет окно целиком
- `pygame.display.update()` - обновляет окно частично

Принято обновлять окно в конце цикла игры, чтобы обновление учитывало все возможные изменения

```python
import pygame # Импорт библитеки

# Инициализируем весь pygame
pygame.init()

# Создание окна и установка названия (подписи)
WINDOW_WIDTH = 600
WINDOW_HEIGHT = 300
display_surface = pygame.display.set_mode((WINDOW_WIDTH, WINDOW_HEIGHT))
pygame.display.set_caption("Game")

# Объявляем цвета в RGB
BLACK = (0,0,0)
WHITE = (255, 255, 255)
REB = (255, 0, 0)
GREEN = (0, 255, 0)
BLUE = (0, 0, 255)
YELLOW = (255, 255, 0)
CYAN = (0, 255, 255)
MAGENTA = (255, 0, 255)

# Красим задний фон
display_surface.fill(WHITE)

# Основной цикл программы
running = True
while running:
    # Цикл по списку событий, которые произошли
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
    
    # Обновяем окно
    pygame.display.update()

# Закрытие всех модулей pygame
pygame.quit()
```

Теперь все работает

## Так же мы можем рисовать разные формы

### Линии
```python
import pygame 
pygame.init()

WINDOW_WIDTH = 600
WINDOW_HEIGHT = 300
display_surface = pygame.display.set_mode((WINDOW_WIDTH, WINDOW_HEIGHT))
pygame.display.set_caption("Game")

BLACK = (0,0,0)
WHITE = (255, 255, 255)
RED = (255, 0, 0)
GREEN = (0, 255, 0)
BLUE = (0, 0, 255)
YELLOW = (255, 255, 0)
CYAN = (0, 255, 255)
MAGENTA = (255, 0, 255)

display_surface.fill(WHITE)

# Рисуем
pygame.draw.line(display_surface, RED, (0, 0), (100, 100), 5)
pygame.draw.line(display_surface, BLUE, (100, 100), (200, 250), 5)

running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
    
    pygame.display.update()

pygame.quit()
```

- `pygame.draw.line`(поверхность, цвет, начальная точка, конечная точка, толщина)

### Круги
```python
import pygame 
pygame.init()

WINDOW_WIDTH = 600
WINDOW_HEIGHT = 300
display_surface = pygame.display.set_mode((WINDOW_WIDTH, WINDOW_HEIGHT))
pygame.display.set_caption("Game")

BLACK = (0,0,0)
WHITE = (255, 255, 255)
RED = (255, 0, 0)
GREEN = (0, 255, 0)
BLUE = (0, 0, 255)
YELLOW = (255, 255, 0)
CYAN = (0, 255, 255)
MAGENTA = (255, 0, 255)

display_surface.fill(WHITE)

# Рисуем
pygame.draw.circle(display_surface, GREEN, (WINDOW_WIDTH//2, WINDOW_HEIGHT//2), 100, 5)
pygame.draw.circle(display_surface, GREEN, (WINDOW_WIDTH//2, WINDOW_HEIGHT//2), 75, 0)

running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
    
    pygame.display.update()

pygame.quit()
```

- `pygame.draw.circle`(поверхность, цвет, центр, радиус, толщина)
- Если указать толщину 0 - будет заливка

### Прямоугольники
```python
import pygame 
pygame.init()

WINDOW_WIDTH = 600
WINDOW_HEIGHT = 300
display_surface = pygame.display.set_mode((WINDOW_WIDTH, WINDOW_HEIGHT))
pygame.display.set_caption("Game")

BLACK = (0,0,0)
WHITE = (255, 255, 255)
RED = (255, 0, 0)
GREEN = (0, 255, 0)
BLUE = (0, 0, 255)
YELLOW = (255, 255, 0)
CYAN = (0, 255, 255)
MAGENTA = (255, 0, 255)

display_surface.fill(WHITE)

# Рисуем
pygame.draw.rect(display_surface, CYAN, (0, 0, 200, 250))
pygame.draw.rect(display_surface, MAGENTA, (200, 50, 100, 150))

running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
    
    pygame.display.update()

pygame.quit()
```
- `pygame.draw.rectangle`(поверхность, цвет, (верхний-левый x, верхний-левый y, ширина, высота))

# Изображения

Добавьте изображение в ту же папку, что и ваш код

```python
import pygame 
pygame.init()

WINDOW_WIDTH = 600
WINDOW_HEIGHT = 300
display_surface = pygame.display.set_mode((WINDOW_WIDTH, WINDOW_HEIGHT))
pygame.display.set_caption("Game")

# Добавление картинки
# Возвращает поверхность, на которой нарисована картинка
image = pygame.image.load("image.jpg")
# получаем прямоугольник
image_rect = image.get_rect()
# размещаем
image_rect.topleft = (0,0)

running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
    
    # Добавляем картинку на наш холст
    display_surface.blit(image, image_rect)

    pygame.display.update()

pygame.quit()
```

- Объявляем картинку
- Получаем прямоугольник, описывающий размеры и положение картринки
- указываем нужное нам положение
- Копируем картинку на основную поверхность

# Текст
Для того, чтобы писать текст, нам нужно определиться со шрифтом. Он может быть в отдельном файле, или одним из тех, которые установлены на компьютере

Чтобы понять какие шрифты у нас на компьютере вообще есть можно запустить этот код:
```python
import pygame 
pygame.init()

WINDOW_WIDTH = 600
WINDOW_HEIGHT = 300
display_surface = pygame.display.set_mode((WINDOW_WIDTH, WINDOW_HEIGHT))
pygame.display.set_caption("Game")

# Цвета
WHITE = (255,255, 255)
BLACK = (0, 0, 0)

# Получаем все шрифты, что у нас есть
fonts = pygame.font.get_fonts()
for font in fonts:
    print(font)

running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
    
    pygame.display.update()

pygame.quit()
```

Отображение текста похоже на отображение картинок
```python
import pygame 
pygame.init()

WINDOW_WIDTH = 600
WINDOW_HEIGHT = 300
display_surface = pygame.display.set_mode((WINDOW_WIDTH, WINDOW_HEIGHT))
pygame.display.set_caption("Game")

# Цвета
WHITE = (255,255, 255)
BLACK = (0, 0, 0)

# Объявляем шрифты
system_font = pygame.font.SysFont("arial", 64)
custom_font = pygame.font.Font("Montserrat.ttf", 32)

# Объявляем текст
system_text = system_font.render("Hello world", True, BLACK, WHITE)
system_text_rect = system_text.get_rect()
system_text_rect.center = (WINDOW_WIDTH//2, WINDOW_HEIGHT//2)

custom_text = custom_font.render("Custom hello", True, WHITE)
custom_text_rect = custom_text.get_rect()
custom_text_rect.center = (WINDOW_WIDTH//2, WINDOW_HEIGHT//2+100)


running = True
while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
    
    # Добавляем на наш холст текст
    display_surface.blit(system_text, system_text_rect)
    display_surface.blit(custom_text, custom_text_rect)

    pygame.display.update()

pygame.quit()
```

- Если мы используем системный шрифт - pygame.font.SysFont(название, размер)
- Если мы используем шрифт из файла - pygame.font.Font(путь, размер)
- Метод render позволяет нам получить надпись. Он принимает
	- Текст
	- Применять ли сглаживание
	- Цвет текста 
	- Цвет фона
- Получаем прямоугольник, который описывает размеры надписи через `get_rect()`
- Копируем надпись в поверхность и указываем то, где она должна распологаться

